{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport * as React from 'react';\nimport classNames from 'classnames';\nimport Overflow from 'rc-overflow';\nimport warning from \"rc-util/es/warning\";\nimport SubMenuList from './SubMenuList';\nimport { parseChildren } from '../utils/nodeUtil';\nimport MenuContextProvider, { MenuContext } from '../context/MenuContext';\nimport useMemoCallback from '../hooks/useMemoCallback';\nimport PopupTrigger from './PopupTrigger';\nimport Icon from '../Icon';\nimport useActive from '../hooks/useActive';\nimport { warnItemProp } from '../utils/warnUtil';\nimport useDirectionStyle from '../hooks/useDirectionStyle';\nimport InlineSubMenuList from './InlineSubMenuList';\nimport { PathTrackerContext, PathUserContext, useFullPath, useMeasure } from '../context/PathContext';\nimport { useMenuId } from '../context/IdContext';\n\nvar InternalSubMenu = function InternalSubMenu(props) {\n  var _classNames;\n\n  var style = props.style,\n      className = props.className,\n      title = props.title,\n      eventKey = props.eventKey,\n      warnKey = props.warnKey,\n      disabled = props.disabled,\n      internalPopupClose = props.internalPopupClose,\n      children = props.children,\n      itemIcon = props.itemIcon,\n      expandIcon = props.expandIcon,\n      popupClassName = props.popupClassName,\n      popupOffset = props.popupOffset,\n      onClick = props.onClick,\n      onMouseEnter = props.onMouseEnter,\n      onMouseLeave = props.onMouseLeave,\n      onTitleClick = props.onTitleClick,\n      onTitleMouseEnter = props.onTitleMouseEnter,\n      onTitleMouseLeave = props.onTitleMouseLeave,\n      restProps = _objectWithoutProperties(props, [\"style\", \"className\", \"title\", \"eventKey\", \"warnKey\", \"disabled\", \"internalPopupClose\", \"children\", \"itemIcon\", \"expandIcon\", \"popupClassName\", \"popupOffset\", \"onClick\", \"onMouseEnter\", \"onMouseLeave\", \"onTitleClick\", \"onTitleMouseEnter\", \"onTitleMouseLeave\"]);\n\n  var domDataId = useMenuId(eventKey);\n\n  var _React$useContext = React.useContext(MenuContext),\n      prefixCls = _React$useContext.prefixCls,\n      mode = _React$useContext.mode,\n      openKeys = _React$useContext.openKeys,\n      contextDisabled = _React$useContext.disabled,\n      overflowDisabled = _React$useContext.overflowDisabled,\n      activeKey = _React$useContext.activeKey,\n      selectedKeys = _React$useContext.selectedKeys,\n      contextItemIcon = _React$useContext.itemIcon,\n      contextExpandIcon = _React$useContext.expandIcon,\n      onItemClick = _React$useContext.onItemClick,\n      onOpenChange = _React$useContext.onOpenChange,\n      onActive = _React$useContext.onActive;\n\n  var _React$useContext2 = React.useContext(PathUserContext),\n      isSubPathKey = _React$useContext2.isSubPathKey;\n\n  var connectedPath = useFullPath();\n  var subMenuPrefixCls = \"\".concat(prefixCls, \"-submenu\");\n  var mergedDisabled = contextDisabled || disabled;\n  var elementRef = React.useRef();\n  var popupRef = React.useRef(); // ================================ Warn ================================\n\n  if (process.env.NODE_ENV !== 'production' && warnKey) {\n    warning(false, 'SubMenu should not leave undefined `key`.');\n  } // ================================ Icon ================================\n\n\n  var mergedItemIcon = itemIcon || contextItemIcon;\n  var mergedExpandIcon = expandIcon || contextExpandIcon; // ================================ Open ================================\n\n  var originOpen = openKeys.includes(eventKey);\n  var open = !overflowDisabled && originOpen; // =============================== Select ===============================\n\n  var childrenSelected = isSubPathKey(selectedKeys, eventKey); // =============================== Active ===============================\n\n  var _useActive = useActive(eventKey, mergedDisabled, onTitleMouseEnter, onTitleMouseLeave),\n      active = _useActive.active,\n      activeProps = _objectWithoutProperties(_useActive, [\"active\"]); // Fallback of active check to avoid hover on menu title or disabled item\n\n\n  var _React$useState = React.useState(false),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      childrenActive = _React$useState2[0],\n      setChildrenActive = _React$useState2[1];\n\n  var triggerChildrenActive = function triggerChildrenActive(newActive) {\n    if (!mergedDisabled) {\n      setChildrenActive(newActive);\n    }\n  };\n\n  var onInternalMouseEnter = function onInternalMouseEnter(domEvent) {\n    triggerChildrenActive(true);\n    onMouseEnter === null || onMouseEnter === void 0 ? void 0 : onMouseEnter({\n      key: eventKey,\n      domEvent: domEvent\n    });\n  };\n\n  var onInternalMouseLeave = function onInternalMouseLeave(domEvent) {\n    triggerChildrenActive(false);\n    onMouseLeave === null || onMouseLeave === void 0 ? void 0 : onMouseLeave({\n      key: eventKey,\n      domEvent: domEvent\n    });\n  };\n\n  var mergedActive = React.useMemo(function () {\n    if (active) {\n      return active;\n    }\n\n    if (mode !== 'inline') {\n      return childrenActive || isSubPathKey([activeKey], eventKey);\n    }\n\n    return false;\n  }, [mode, active, activeKey, childrenActive, eventKey, isSubPathKey]); // ========================== DirectionStyle ==========================\n\n  var directionStyle = useDirectionStyle(connectedPath.length); // =============================== Events ===============================\n  // >>>> Title click\n\n  var onInternalTitleClick = function onInternalTitleClick(e) {\n    // Skip if disabled\n    if (mergedDisabled) {\n      return;\n    }\n\n    onTitleClick === null || onTitleClick === void 0 ? void 0 : onTitleClick({\n      key: eventKey,\n      domEvent: e\n    }); // Trigger open by click when mode is `inline`\n\n    if (mode === 'inline') {\n      onOpenChange(eventKey, !originOpen);\n    }\n  }; // >>>> Context for children click\n\n\n  var onMergedItemClick = useMemoCallback(function (info) {\n    onClick === null || onClick === void 0 ? void 0 : onClick(warnItemProp(info));\n    onItemClick(info);\n  }); // >>>>> Visible change\n\n  var onPopupVisibleChange = function onPopupVisibleChange(newVisible) {\n    if (mode !== 'inline') {\n      onOpenChange(eventKey, newVisible);\n    }\n  };\n  /**\n   * Used for accessibility. Helper will focus element without key board.\n   * We should manually trigger an active\n   */\n\n\n  var onInternalFocus = function onInternalFocus() {\n    onActive(eventKey);\n  }; // =============================== Render ===============================\n\n\n  var popupId = domDataId && \"\".concat(domDataId, \"-popup\"); // >>>>> Title\n\n  var titleNode = /*#__PURE__*/React.createElement(\"div\", _extends({\n    role: \"menuitem\",\n    style: directionStyle,\n    className: \"\".concat(subMenuPrefixCls, \"-title\"),\n    tabIndex: mergedDisabled ? null : -1,\n    ref: elementRef,\n    title: typeof title === 'string' ? title : null,\n    \"data-menu-id\": overflowDisabled && domDataId ? null : domDataId,\n    \"aria-expanded\": open,\n    \"aria-haspopup\": true,\n    \"aria-controls\": popupId,\n    \"aria-disabled\": mergedDisabled,\n    onClick: onInternalTitleClick,\n    onFocus: onInternalFocus\n  }, activeProps), title, /*#__PURE__*/React.createElement(Icon, {\n    icon: mode !== 'horizontal' ? mergedExpandIcon : null,\n    props: _objectSpread(_objectSpread({}, props), {}, {\n      isOpen: open,\n      // [Legacy] Not sure why need this mark\n      isSubMenu: true\n    })\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"\".concat(subMenuPrefixCls, \"-arrow\")\n  }))); // Cache mode if it change to `inline` which do not have popup motion\n\n  var triggerModeRef = React.useRef(mode);\n\n  if (mode !== 'inline') {\n    triggerModeRef.current = connectedPath.length > 1 ? 'vertical' : mode;\n  }\n\n  if (!overflowDisabled) {\n    var triggerMode = triggerModeRef.current; // Still wrap with Trigger here since we need avoid react re-mount dom node\n    // Which makes motion failed\n\n    titleNode = /*#__PURE__*/React.createElement(PopupTrigger, {\n      mode: triggerMode,\n      prefixCls: subMenuPrefixCls,\n      visible: !internalPopupClose && open && mode !== 'inline',\n      popupClassName: popupClassName,\n      popupOffset: popupOffset,\n      popup: /*#__PURE__*/React.createElement(MenuContextProvider // Special handle of horizontal mode\n      , {\n        mode: triggerMode === 'horizontal' ? 'vertical' : triggerMode\n      }, /*#__PURE__*/React.createElement(SubMenuList, {\n        id: popupId,\n        ref: popupRef\n      }, children)),\n      disabled: mergedDisabled,\n      onVisibleChange: onPopupVisibleChange\n    }, titleNode);\n  } // >>>>> Render\n\n\n  return /*#__PURE__*/React.createElement(MenuContextProvider, {\n    onItemClick: onMergedItemClick,\n    mode: mode === 'horizontal' ? 'vertical' : mode,\n    itemIcon: mergedItemIcon,\n    expandIcon: mergedExpandIcon\n  }, /*#__PURE__*/React.createElement(Overflow.Item, _extends({\n    role: \"none\"\n  }, restProps, {\n    component: \"li\",\n    style: style,\n    className: classNames(subMenuPrefixCls, \"\".concat(subMenuPrefixCls, \"-\").concat(mode), className, (_classNames = {}, _defineProperty(_classNames, \"\".concat(subMenuPrefixCls, \"-open\"), open), _defineProperty(_classNames, \"\".concat(subMenuPrefixCls, \"-active\"), mergedActive), _defineProperty(_classNames, \"\".concat(subMenuPrefixCls, \"-selected\"), childrenSelected), _defineProperty(_classNames, \"\".concat(subMenuPrefixCls, \"-disabled\"), mergedDisabled), _classNames)),\n    onMouseEnter: onInternalMouseEnter,\n    onMouseLeave: onInternalMouseLeave\n  }), titleNode, !overflowDisabled && /*#__PURE__*/React.createElement(InlineSubMenuList, {\n    id: popupId,\n    open: open,\n    keyPath: connectedPath\n  }, children)));\n};\n\nexport default function SubMenu(props) {\n  var eventKey = props.eventKey,\n      children = props.children;\n  var connectedKeyPath = useFullPath(eventKey);\n  var childList = parseChildren(children, connectedKeyPath); // ==================== Record KeyPath ====================\n\n  var measure = useMeasure(); // eslint-disable-next-line consistent-return\n\n  React.useEffect(function () {\n    if (measure) {\n      measure.registerPath(eventKey, connectedKeyPath);\n      return function () {\n        measure.unregisterPath(eventKey, connectedKeyPath);\n      };\n    }\n  }, [connectedKeyPath]);\n  var renderNode; // ======================== Render ========================\n\n  if (measure) {\n    renderNode = childList;\n  } else {\n    renderNode = /*#__PURE__*/React.createElement(InternalSubMenu, props, childList);\n  }\n\n  return /*#__PURE__*/React.createElement(PathTrackerContext.Provider, {\n    value: connectedKeyPath\n  }, renderNode);\n}","map":{"version":3,"sources":["/Users/dragos/Ruby-developer/GitHubDev/muse-ant-design-dashboard/node_modules/rc-menu/es/SubMenu/index.js"],"names":["_defineProperty","_extends","_objectSpread","_slicedToArray","_objectWithoutProperties","React","classNames","Overflow","warning","SubMenuList","parseChildren","MenuContextProvider","MenuContext","useMemoCallback","PopupTrigger","Icon","useActive","warnItemProp","useDirectionStyle","InlineSubMenuList","PathTrackerContext","PathUserContext","useFullPath","useMeasure","useMenuId","InternalSubMenu","props","_classNames","style","className","title","eventKey","warnKey","disabled","internalPopupClose","children","itemIcon","expandIcon","popupClassName","popupOffset","onClick","onMouseEnter","onMouseLeave","onTitleClick","onTitleMouseEnter","onTitleMouseLeave","restProps","domDataId","_React$useContext","useContext","prefixCls","mode","openKeys","contextDisabled","overflowDisabled","activeKey","selectedKeys","contextItemIcon","contextExpandIcon","onItemClick","onOpenChange","onActive","_React$useContext2","isSubPathKey","connectedPath","subMenuPrefixCls","concat","mergedDisabled","elementRef","useRef","popupRef","process","env","NODE_ENV","mergedItemIcon","mergedExpandIcon","originOpen","includes","open","childrenSelected","_useActive","active","activeProps","_React$useState","useState","_React$useState2","childrenActive","setChildrenActive","triggerChildrenActive","newActive","onInternalMouseEnter","domEvent","key","onInternalMouseLeave","mergedActive","useMemo","directionStyle","length","onInternalTitleClick","e","onMergedItemClick","info","onPopupVisibleChange","newVisible","onInternalFocus","popupId","titleNode","createElement","role","tabIndex","ref","onFocus","icon","isOpen","isSubMenu","triggerModeRef","current","triggerMode","visible","popup","id","onVisibleChange","Item","component","keyPath","SubMenu","connectedKeyPath","childList","measure","useEffect","registerPath","unregisterPath","renderNode","Provider","value"],"mappings":"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","sourcesContent":["import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport * as React from 'react';\nimport classNames from 'classnames';\nimport Overflow from 'rc-overflow';\nimport warning from \"rc-util/es/warning\";\nimport SubMenuList from './SubMenuList';\nimport { parseChildren } from '../utils/nodeUtil';\nimport MenuContextProvider, { MenuContext } from '../context/MenuContext';\nimport useMemoCallback from '../hooks/useMemoCallback';\nimport PopupTrigger from './PopupTrigger';\nimport Icon from '../Icon';\nimport useActive from '../hooks/useActive';\nimport { warnItemProp } from '../utils/warnUtil';\nimport useDirectionStyle from '../hooks/useDirectionStyle';\nimport InlineSubMenuList from './InlineSubMenuList';\nimport { PathTrackerContext, PathUserContext, useFullPath, useMeasure } from '../context/PathContext';\nimport { useMenuId } from '../context/IdContext';\n\nvar InternalSubMenu = function InternalSubMenu(props) {\n  var _classNames;\n\n  var style = props.style,\n      className = props.className,\n      title = props.title,\n      eventKey = props.eventKey,\n      warnKey = props.warnKey,\n      disabled = props.disabled,\n      internalPopupClose = props.internalPopupClose,\n      children = props.children,\n      itemIcon = props.itemIcon,\n      expandIcon = props.expandIcon,\n      popupClassName = props.popupClassName,\n      popupOffset = props.popupOffset,\n      onClick = props.onClick,\n      onMouseEnter = props.onMouseEnter,\n      onMouseLeave = props.onMouseLeave,\n      onTitleClick = props.onTitleClick,\n      onTitleMouseEnter = props.onTitleMouseEnter,\n      onTitleMouseLeave = props.onTitleMouseLeave,\n      restProps = _objectWithoutProperties(props, [\"style\", \"className\", \"title\", \"eventKey\", \"warnKey\", \"disabled\", \"internalPopupClose\", \"children\", \"itemIcon\", \"expandIcon\", \"popupClassName\", \"popupOffset\", \"onClick\", \"onMouseEnter\", \"onMouseLeave\", \"onTitleClick\", \"onTitleMouseEnter\", \"onTitleMouseLeave\"]);\n\n  var domDataId = useMenuId(eventKey);\n\n  var _React$useContext = React.useContext(MenuContext),\n      prefixCls = _React$useContext.prefixCls,\n      mode = _React$useContext.mode,\n      openKeys = _React$useContext.openKeys,\n      contextDisabled = _React$useContext.disabled,\n      overflowDisabled = _React$useContext.overflowDisabled,\n      activeKey = _React$useContext.activeKey,\n      selectedKeys = _React$useContext.selectedKeys,\n      contextItemIcon = _React$useContext.itemIcon,\n      contextExpandIcon = _React$useContext.expandIcon,\n      onItemClick = _React$useContext.onItemClick,\n      onOpenChange = _React$useContext.onOpenChange,\n      onActive = _React$useContext.onActive;\n\n  var _React$useContext2 = React.useContext(PathUserContext),\n      isSubPathKey = _React$useContext2.isSubPathKey;\n\n  var connectedPath = useFullPath();\n  var subMenuPrefixCls = \"\".concat(prefixCls, \"-submenu\");\n  var mergedDisabled = contextDisabled || disabled;\n  var elementRef = React.useRef();\n  var popupRef = React.useRef(); // ================================ Warn ================================\n\n  if (process.env.NODE_ENV !== 'production' && warnKey) {\n    warning(false, 'SubMenu should not leave undefined `key`.');\n  } // ================================ Icon ================================\n\n\n  var mergedItemIcon = itemIcon || contextItemIcon;\n  var mergedExpandIcon = expandIcon || contextExpandIcon; // ================================ Open ================================\n\n  var originOpen = openKeys.includes(eventKey);\n  var open = !overflowDisabled && originOpen; // =============================== Select ===============================\n\n  var childrenSelected = isSubPathKey(selectedKeys, eventKey); // =============================== Active ===============================\n\n  var _useActive = useActive(eventKey, mergedDisabled, onTitleMouseEnter, onTitleMouseLeave),\n      active = _useActive.active,\n      activeProps = _objectWithoutProperties(_useActive, [\"active\"]); // Fallback of active check to avoid hover on menu title or disabled item\n\n\n  var _React$useState = React.useState(false),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      childrenActive = _React$useState2[0],\n      setChildrenActive = _React$useState2[1];\n\n  var triggerChildrenActive = function triggerChildrenActive(newActive) {\n    if (!mergedDisabled) {\n      setChildrenActive(newActive);\n    }\n  };\n\n  var onInternalMouseEnter = function onInternalMouseEnter(domEvent) {\n    triggerChildrenActive(true);\n    onMouseEnter === null || onMouseEnter === void 0 ? void 0 : onMouseEnter({\n      key: eventKey,\n      domEvent: domEvent\n    });\n  };\n\n  var onInternalMouseLeave = function onInternalMouseLeave(domEvent) {\n    triggerChildrenActive(false);\n    onMouseLeave === null || onMouseLeave === void 0 ? void 0 : onMouseLeave({\n      key: eventKey,\n      domEvent: domEvent\n    });\n  };\n\n  var mergedActive = React.useMemo(function () {\n    if (active) {\n      return active;\n    }\n\n    if (mode !== 'inline') {\n      return childrenActive || isSubPathKey([activeKey], eventKey);\n    }\n\n    return false;\n  }, [mode, active, activeKey, childrenActive, eventKey, isSubPathKey]); // ========================== DirectionStyle ==========================\n\n  var directionStyle = useDirectionStyle(connectedPath.length); // =============================== Events ===============================\n  // >>>> Title click\n\n  var onInternalTitleClick = function onInternalTitleClick(e) {\n    // Skip if disabled\n    if (mergedDisabled) {\n      return;\n    }\n\n    onTitleClick === null || onTitleClick === void 0 ? void 0 : onTitleClick({\n      key: eventKey,\n      domEvent: e\n    }); // Trigger open by click when mode is `inline`\n\n    if (mode === 'inline') {\n      onOpenChange(eventKey, !originOpen);\n    }\n  }; // >>>> Context for children click\n\n\n  var onMergedItemClick = useMemoCallback(function (info) {\n    onClick === null || onClick === void 0 ? void 0 : onClick(warnItemProp(info));\n    onItemClick(info);\n  }); // >>>>> Visible change\n\n  var onPopupVisibleChange = function onPopupVisibleChange(newVisible) {\n    if (mode !== 'inline') {\n      onOpenChange(eventKey, newVisible);\n    }\n  };\n  /**\n   * Used for accessibility. Helper will focus element without key board.\n   * We should manually trigger an active\n   */\n\n\n  var onInternalFocus = function onInternalFocus() {\n    onActive(eventKey);\n  }; // =============================== Render ===============================\n\n\n  var popupId = domDataId && \"\".concat(domDataId, \"-popup\"); // >>>>> Title\n\n  var titleNode = /*#__PURE__*/React.createElement(\"div\", _extends({\n    role: \"menuitem\",\n    style: directionStyle,\n    className: \"\".concat(subMenuPrefixCls, \"-title\"),\n    tabIndex: mergedDisabled ? null : -1,\n    ref: elementRef,\n    title: typeof title === 'string' ? title : null,\n    \"data-menu-id\": overflowDisabled && domDataId ? null : domDataId,\n    \"aria-expanded\": open,\n    \"aria-haspopup\": true,\n    \"aria-controls\": popupId,\n    \"aria-disabled\": mergedDisabled,\n    onClick: onInternalTitleClick,\n    onFocus: onInternalFocus\n  }, activeProps), title, /*#__PURE__*/React.createElement(Icon, {\n    icon: mode !== 'horizontal' ? mergedExpandIcon : null,\n    props: _objectSpread(_objectSpread({}, props), {}, {\n      isOpen: open,\n      // [Legacy] Not sure why need this mark\n      isSubMenu: true\n    })\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"\".concat(subMenuPrefixCls, \"-arrow\")\n  }))); // Cache mode if it change to `inline` which do not have popup motion\n\n  var triggerModeRef = React.useRef(mode);\n\n  if (mode !== 'inline') {\n    triggerModeRef.current = connectedPath.length > 1 ? 'vertical' : mode;\n  }\n\n  if (!overflowDisabled) {\n    var triggerMode = triggerModeRef.current; // Still wrap with Trigger here since we need avoid react re-mount dom node\n    // Which makes motion failed\n\n    titleNode = /*#__PURE__*/React.createElement(PopupTrigger, {\n      mode: triggerMode,\n      prefixCls: subMenuPrefixCls,\n      visible: !internalPopupClose && open && mode !== 'inline',\n      popupClassName: popupClassName,\n      popupOffset: popupOffset,\n      popup: /*#__PURE__*/React.createElement(MenuContextProvider // Special handle of horizontal mode\n      , {\n        mode: triggerMode === 'horizontal' ? 'vertical' : triggerMode\n      }, /*#__PURE__*/React.createElement(SubMenuList, {\n        id: popupId,\n        ref: popupRef\n      }, children)),\n      disabled: mergedDisabled,\n      onVisibleChange: onPopupVisibleChange\n    }, titleNode);\n  } // >>>>> Render\n\n\n  return /*#__PURE__*/React.createElement(MenuContextProvider, {\n    onItemClick: onMergedItemClick,\n    mode: mode === 'horizontal' ? 'vertical' : mode,\n    itemIcon: mergedItemIcon,\n    expandIcon: mergedExpandIcon\n  }, /*#__PURE__*/React.createElement(Overflow.Item, _extends({\n    role: \"none\"\n  }, restProps, {\n    component: \"li\",\n    style: style,\n    className: classNames(subMenuPrefixCls, \"\".concat(subMenuPrefixCls, \"-\").concat(mode), className, (_classNames = {}, _defineProperty(_classNames, \"\".concat(subMenuPrefixCls, \"-open\"), open), _defineProperty(_classNames, \"\".concat(subMenuPrefixCls, \"-active\"), mergedActive), _defineProperty(_classNames, \"\".concat(subMenuPrefixCls, \"-selected\"), childrenSelected), _defineProperty(_classNames, \"\".concat(subMenuPrefixCls, \"-disabled\"), mergedDisabled), _classNames)),\n    onMouseEnter: onInternalMouseEnter,\n    onMouseLeave: onInternalMouseLeave\n  }), titleNode, !overflowDisabled && /*#__PURE__*/React.createElement(InlineSubMenuList, {\n    id: popupId,\n    open: open,\n    keyPath: connectedPath\n  }, children)));\n};\n\nexport default function SubMenu(props) {\n  var eventKey = props.eventKey,\n      children = props.children;\n  var connectedKeyPath = useFullPath(eventKey);\n  var childList = parseChildren(children, connectedKeyPath); // ==================== Record KeyPath ====================\n\n  var measure = useMeasure(); // eslint-disable-next-line consistent-return\n\n  React.useEffect(function () {\n    if (measure) {\n      measure.registerPath(eventKey, connectedKeyPath);\n      return function () {\n        measure.unregisterPath(eventKey, connectedKeyPath);\n      };\n    }\n  }, [connectedKeyPath]);\n  var renderNode; // ======================== Render ========================\n\n  if (measure) {\n    renderNode = childList;\n  } else {\n    renderNode = /*#__PURE__*/React.createElement(InternalSubMenu, props, childList);\n  }\n\n  return /*#__PURE__*/React.createElement(PathTrackerContext.Provider, {\n    value: connectedKeyPath\n  }, renderNode);\n}"]},"metadata":{},"sourceType":"module"}